<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.himedia.twoving.dao.IPaymentDAO">
    <select id="getAllCount" resultType="_int">
        select count(*) from payment where userid=#{param1}
    </select>

    <select id="getSelectList" resultType="com.himedia.twoving.dto.PaymentVO">
        select* from payment where userid=#{param1} and subscribeyn='Y'
    </select>

    <select id="getAllList" resultType="com.himedia.twoving.dto.PaymentVO">
        select* from payment where userid=#{param2} order by pmseq desc limit #{param1.displayRow} offset #{param1.startNum}
    </select>

    <select id="getPayment" resultType="com.himedia.twoving.dto.PaymentVO">
        select* from payment where productname=#{param1} and userid=#{param2} and subscribeyn='Y'
    </select>

    <update id="passTicketUpdate1">
        update payment set subscribeyn='N' where pmseq=#{param1}
    </update>

    <insert id="passTicketInsert1" parameterType="com.himedia.twoving.dto.PaymentVO">
        insert into payment(userid, subscribeyn, productname, paymentprice) values(#{userid},#{subscribeyn},#{productname},#{paymentprice})
    </insert>

    <update id="updateMemberPass">
        update member set ptseq=#{param2} where userid=#{param1}
    </update>

    <select id="getPaymentOne" resultType="com.himedia.twoving.dto.PaymentVO">
        select* from payment where userid=#{param1}
    </select>
</mapper>